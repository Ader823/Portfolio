(()=>{"use strict";var e,t,n,a,r,o,c,i,s=function(e,t,n,a){return void 0===a&&(a=1),"rgba(".concat(e,",").concat(t,",").concat(n,",").concat(a,")")},u=function(e,t){return Math.random()*(t-e)+e};!function(e){e[e.gain=.5]="gain",e[e.numSamples=64]="numSamples"}(e||(e={}));var l,h,d,v,g,m,f=function(e){n.src=e},y=function(){function e(e){var t=e.x,n=e.y,a=e.width,r=e.height,o=e.path;this.rotateAmount=.1,Object.assign(this,{x:t,y:n,width:a,height:r,path:o})}return e.prototype.update=function(e){for(var t=0;t<e.length;t++){var n=e[t]/255;this.rotateAmount+=n/255}},e.prototype.draw=function(e){var t=new Image;t.src=this.path,e.save(),e.translate(this.x,this.y),e.rotate(this.rotateAmount),e.drawImage(t,-this.width/2,-this.height/2,this.width,this.height),e.restore()},e.type="image",e}(),p=function(){function e(e){var t=e.x,n=e.y,a=e.spikes,r=e.outerRadius,o=e.innerRadius;Object.assign(this,{x:t,y:n,spikes:a,outerRadius:r,innerRadius:o}),this.scaleValue=1,this.maxSize=10}return e.prototype.update=function(e){var t=e[20]/255;this.scaleValue=this.maxSize*t/10},e.prototype.draw=function(e){e.save(),e.translate(this.x,this.y),e.scale(this.scaleValue,this.scaleValue);var t=Math.PI/2*3,n=this.x,a=this.y,r=Math.PI/this.spikes;e.strokeSyle="#000",e.beginPath(),e.moveTo(0,0-this.outerRadius);for(var o=0;o<this.spikes;o++)n=Math.cos(t)*this.outerRadius,a=Math.sin(t)*this.outerRadius,e.lineTo(n,a),t+=r,n=Math.cos(t)*this.innerRadius,a=Math.sin(t)*this.innerRadius,e.lineTo(n,a),t+=r;e.lineTo(0,0-this.outerRadius),e.closePath(),e.lineWidth=5,e.strokeStyle="white",e.stroke(),e.fillStyle="white",e.globalAlpha=.8,e.fill(),e.restore()},e.type="star",e}(),b=[],S=function(){for(var e=0;e<101;e++)b[e+1]=new p({x:u(0,h),y:u(0,d),spikes:4,outerRadius:15,innerRadius:5})},w={showGradient:!0,showBars:!0,showCircles:!0,showNoise:!1,showInvert:!1,showEmboss:!1,useFrequencyData:!0,numOfStars:50,saturation:0,colorFilter:"none"},q=Object.freeze({sound1:"media/Your Love by The Outfield.mp3"}),k=function(e){var a,r;a=document.querySelector("#burger"),r=document.querySelector("#nav-links"),a.addEventListener("click",(function(){r.classList.toggle("is-active")}));var s=document.querySelector("#btn-play");s.onclick=function(e){var a=e.target;console.log("audioCtx.state before = ".concat(t.state)),"suspended"==t.state&&t.resume(),console.log("audioCtx.state after = ".concat(t.state)),"no"==a.dataset.playing?(n.play(),a.dataset.playing="yes"):(n.pause(),a.dataset.playing="no")},document.querySelector("#fs-button").onclick=function(t){var n;console.log("goFullscreen() called"),(n=e).requestFullscreen?n.requestFullscreen():n.mozRequestFullscreen?n.mozRequestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen&&n.webkitRequestFullscreen()};var u=document.querySelector("#volume-slider"),l=document.querySelector("#volume-label");u.oninput=function(e){var t,n,a=e.target;t=a.value,n=Number(t),o.gain.value=n,l.innerHTML=Math.round(Number(a.value)/2*100).toString()},u.dispatchEvent(new Event("input")),document.querySelector("#track-select").onchange=function(e){var t=e.target;f(t.value),"yes"==s.dataset.playing&&s.dispatchEvent(new MouseEvent("click"))};var h=document.querySelector("#cb-gradient");h.checked=!0,h.onchange=function(e){var t=e.target;w.showGradient=t.checked};var d=document.querySelector("#cb-bars");d.checked=!0,d.onchange=function(e){var t=e.target;w.showBars=t.checked};var v=document.querySelector("#cb-circles");v.checked=!0,v.onchange=function(e){var t=e.target;w.showCircles=t.checked},document.querySelector("#cb-noise").onchange=function(e){var t=e.target;w.showNoise=t.checked},document.querySelector("#cb-invert").onchange=function(e){var t=e.target;w.showInvert=t.checked},document.querySelector("#cb-emboss").onchange=function(e){var t=e.target;w.showEmboss=t.checked};var g=document.querySelector("#btn-frequency-data"),m=document.querySelector("#btn-time-domain");g.checked=w.useFrequencyData,g.onchange=function(e){var t=e.target;w.useFrequencyData=Boolean(t.value)},m.onchange=function(e){var t=e.target;w.useFrequencyData=Boolean(t.value)};var y=document.querySelector("#bass-slider"),p=document.querySelector("#bass-label");y.oninput=function(e){var n,a,r=e.target;n=r.value,a=Number(n),i.frequency.setValueAtTime(1e3,t.currentTime),i.gain.setValueAtTime(a,t.currentTime),p.innerHTML=r.value},y.dispatchEvent(new Event("input"));var b=document.querySelector("#treble-slider"),q=document.querySelector("#treble-label");b.oninput=function(e){var n,a,r=e.target;n=r.value,a=Number(n),c.frequency.setValueAtTime(1e3,t.currentTime),c.gain.setValueAtTime(a,t.currentTime),q.innerHTML=r.value},b.dispatchEvent(new Event("input"));var k=document.querySelector("#star-slider");k.value=w.numOfStars.toString();var T=document.querySelector("#star-label");k.oninput=function(e){var t=e.target;w.numOfStars=Number(t.value),T.innerHTML=t.value},k.dispatchEvent(new Event("input")),document.querySelector("#btn-stars").onclick=function(){return S()};var M=document.querySelector("#sat-slider");M.value=w.saturation.toString();var R=document.querySelector("#sat-label");M.oninput=function(e){var t=e.target;w.saturation=Number(t.value),R.innerHTML=t.value},M.dispatchEvent(new Event("input")),document.querySelector("#filter-select").onchange=function(e){var t=e.target;w.colorFilter=t.value}},T=function(){setTimeout(T),function(e){if(e.useFrequencyData?g.getByteFrequencyData(m):g.getByteTimeDomainData(m),l.save(),l.fillStyle="black",l.globalAlpha=.1,l.fillRect(0,0,h,d),l.restore(),e.showGradient&&(l.save(),l.fillStyle=v,l.globalAlpha=.3,l.fillRect(0,0,h,d),l.restore()),e.showBars){l.fillStyle="rgb(0,0,0,.1)",l.fillRect(0,0,h,d),l.fillStyle="red",l.save(),l.translate(h/2,d/2-100);for(var t=0,n=Array.from(m);t<n.length;t++){var a=n[t];(c=a/255)<.02&&(c=.02),l.translate(10,0),l.rotate(2*Math.PI/32),l.save(),l.scale(1,-1),l.fillStyle="rgb(".concat(255-a,", ").concat(.8*a,", ").concat(a,")"),l.fillRect(0,0,10,100*c^2),l.fillStyle="rgb(".concat(a,", ").concat(255-.8*a,", ").concat(255-a,")"),l.beginPath(),l.arc(0,a^2/12,5,0,2*Math.PI),l.fill(),l.closePath(),l.restore(),l.translate(10,0)}l.restore()}for(var r=1;r<e.numOfStars+1;r++)b[r+1].draw(l),b[r+1].update(m);if(b[0].draw(l),b[0].update(m),e.showCircles){var o=d/4;for(l.save(),l.globalAlpha=.2,r=0;r<m.length;r++){var c=m[r]/255;l.lineWidth=10*c;var i=c*o;l.beginPath(),l.strokeStyle=s(0,200,200,.35-c/3),l.arc(h/2,d/2,i,0,2*Math.PI,!1),l.stroke(),l.closePath(),l.beginPath(),l.strokeStyle=s(0,0,255,.1-c/10),l.arc(h/2,d/2,1.5*i,0,2*Math.PI,!1),l.stroke(),l.closePath(),l.save(),l.beginPath(),l.strokeStyle=s(200,0,200,.5-c/5),l.arc(h/2,d/2,.5*i,0,2*Math.PI,!1),l.stroke(),l.closePath(),l.restore()}l.restore()}var u=l.getImageData(0,0,h,d),f=u.data,y=f.length,p=u.width;for(r=0;r<y;r+=4){e.showNoise&&Math.random()<.05&&(f[r]=f[r+1]=f[r+2]=0,f[r]=255);var S=f[r],w=f[r+1],q=f[r+2];switch(e.colorFilter){case"none":break;case"mars":f[r]=q,f[r+1]=w,f[r+2]=S;break;case"uranus":f[r]=S,f[r+1]=q,f[r+2]=w;break;case"saturn":f[r]=w,f[r+1]=w,f[r+2]=S;break;case"moon":f[r]=.8*q,f[r+1]=.8*q,f[r+2]=q}if(f[r]*=e.saturation,f[r+1]*=e.saturation,f[r+2]*=e.saturation,e.showInvert){var k=f[r],T=f[r+1],M=f[r+2];f[r]=255-k,f[r+1]=255-T,f[r+2]=255-M}}if(e.showEmboss)for(r=0;r<y;r++)r%4!=3&&(f[r]=127+2*f[r]-f[r+4]-f[r+4*p]);l.putImageData(u,0,0)}(w)},M=function(e){var t,n=e.target.responseText;try{t=JSON.parse(n)}catch(e){return}document.querySelector("#heading").innerHTML=t.title;var a=t.audioFiles.map((function(e){return'<option value="media/'.concat(e,'.mp3"> ').concat(e,"</option>")})).join("");document.querySelector("#track-select").innerHTML=a,document.querySelector("#instructions").innerHTML="<p>".concat(t.instructions,"</p>")},R=function(){var e=new XMLHttpRequest;e.onload=M,e.onerror=function(e){var t=e.target;console.log("In error - HTTP Status Code = ".concat(t.status))},e.open("GET","data/av-data.json"),e.send()};window.onload=function(){console.log("window.onload called"),function(){var s,p,w;s=q.sound1,p=window.AudioContext,t=new p,n=new Audio,f(s),a=t.createMediaElementSource(n),(c=t.createBiquadFilter()).type="highshelf",(i=t.createBiquadFilter()).type="lowshelf",(r=t.createAnalyser()).fftSize=e.numSamples,o=t.createGain(),a.connect(i),i.connect(c),c.connect(r),r.connect(o),o.connect(t.destination),console.log("init called"),console.log("Testing utils.getRandomColor() import: ".concat("rgba(".concat((w=function(){return u(35,220)})(),",").concat(w(),",").concat(w(),",1)")));var M=document.querySelector("canvas");R(),k(M),function(e,t){l=e.getContext("2d"),h=e.width,d=e.height,v=function(e,t,n,a,r){for(var o=e.createLinearGradient(0,0,0,r),c=0,i=[{percent:0,color:"rgba(0,212,255,1)"},{percent:.12,color:"rgba(4,121,195,1)"},{percent:.26,color:"rgba(9,9,121,1)"},{percent:1,color:"rgba(2,0,36,1)"}];c<i.length;c++){var s=i[c];o.addColorStop(s.percent,s.color)}return o}(l,0,0,0,d),g=t,m=new Uint8Array(g.fftSize/2),S(),b[0]=new y({x:h/2,y:d/2,width:200,height:200,path:"./media/images/earth.png"})}(M,r),T()}()}})();
//# sourceMappingURL=bundle.js.map